@page "/Crear-Producto"

<PageTitle>Crear producto</PageTitle>

<AuthorizeView>
    <Authorized>
        <h1 class="text-primary">Productos</h1>

        @if (categories == null)
        {
            <p><em>Loading...</em></p>
        }
        else if (hasError)
        {
            <p><em>Error: @errorMessage</em></p>
        }
        else
        {
            <EditForm Model="@productRequest" OnValidSubmit="@Confirm" Context="EditContext">
                <DataAnnotationsValidator />
                <div class="form-group row col-sm-5 mt-4">
                    <label for="name" class=" col-form-label">Nombre</label>
                    <InputText id="name" class="form-control" @bind-Value="@productRequest.Name" />
                    <ValidationMessage class="text-danger" For="@(()=>productRequest.Name)" />
                </div>
                <div class="form-group row col-sm-5 mt-4">
                    <label for="reference" col-form-label">Referencia</label>
                    <InputText id="reference" class="form-control" @bind-Value="@productRequest.Reference" />
                    <ValidationMessage class="text-danger" For="@(()=>productRequest.Reference)" />
                </div>
                <div class="form-group row col-sm-5 mt-4">
                    <label for="category" col-form-label">Categoria</label>
                    <InputSelect id="category" class="form-control" @bind-Value="@productRequest.CateogryId">
                        <option value="">Seleccione una categoria</option>
                        @foreach (var category in categories)
                        {
                            <option value="@category.Id">@category.Name</option>
                        }
                    </InputSelect>
                    <ValidationMessage class="text-danger" For="@(()=>productRequest.Reference)" />
                </div>
                <div class="form-group row col-sm-5 mt-4">
                    <label for="quantity" class=" col-form-label">Cantidad</label>
                    <InputNumber id="quantity" class="form-control" @bind-Value="@productRequest.Quantity" />
                    <ValidationMessage class="text-danger" For="@(()=>productRequest.Quantity)" />
                </div>
                <div class="form-group row col-sm-5 mt-4">
                    <label for="distributionPrice" class=" col-form-label">Precio de distribución</label>
                    <InputNumber id="distributionPrice" class="form-control" @bind-Value="@productRequest.DistributionPrice" />
                    <ValidationMessage class="text-danger" For="@(()=>productRequest.DistributionPrice)" />
                </div>
                <div class="form-group row col-sm-5 mt-4">
                    <label for="retailPrice" class=" col-form-label">Precio al publico</label>
                    <InputNumber id="retailPrice" class="form-control" @bind-Value="@productRequest.RetailPrice" />
                    <ValidationMessage class="text-danger" For="@(()=>productRequest.RetailPrice)" />
                </div>
                <div class="form-group row col-sm-5 mt-4">
                    <label for="description" class=" col-form-label">Descripción</label>
                    <InputTextArea id="description" class="form-control" @bind-Value="@productRequest.Description" />
                    <ValidationMessage class="text-danger" For="@(()=>productRequest.Description)" />
                </div>

                <div class="form-group row mt-4">
                    <div class="col-sm-10">
                        <button type="submit" class="btn btn-primary">Confirmar</button>
                        <button type="button" class="btn btn-secondary">Cancelar</button>
                    </div>
                </div>
            </EditForm>
        }
    </Authorized>
</AuthorizeView>