@page "/Productos/{productId}"

<PageTitle>Producto</PageTitle>

<AuthorizeView>
    <Authorized>
        @if (product == null)
        {
            <p><em>Loading...</em></p>
        }
        else if (hasError)
        {
            <p><em>Error: @errorMessage</em></p>
        }
        else
        {
            <div class="row">
                <h1 class="text-primary">@product.Name</h1>
                <div class="col-lg-6 my-2">
                    <div class="card">
                        <div class="card-body">
                            <p class="card-text">@product.Description</p>
                        </div>
                    </div>
                </div>
                <div class="col-lg-6 my-2">
                    <div class="card">
                        <div class="card-body">
                            <h5 class="card-title">Precio de Distribución</h5>
                            <p class="card-text">@product.DistributionPrice</p>
                            <h5 class="card-title">Precio Público</h5>
                            <p class="card-text">@product.RetailPrice</p>
                            <h5 class="card-title">Cantidad</h5>
                            <p class="card-text">@product.Quantity</p>
                        </div>
                    </div>
                </div>
            </div>

            @*<div class="accordion">
                <div class="accordion-item m-4">
                    <h2 class="accordion-header">
                        <button class="accordion-button" type="button" @onclick="() => isProvidersCollapsed = !isProvidersCollapsed">
                            Sección 1
                        </button>
                    </h2>
                    <div class="@($"accordion-collapse {(isProvidersCollapsed ? "collapse" : "collapse show")}")">
                        <div class="accordion-body">
                            @if (isProvidersTableVisible)
                            {
                                <button class="btn-primary m-2" @onclick="CreateProductProvider">Crear producto</button>
                                <table class="table m-1">
                                    <thead>
                                        <tr>
                                            <th>Nombre</th>
                                            <th>Cantidad</th>
                                            <th>Cantidad en deuda</th>
                                            <th>Cantidad pagada</th>
                                            <th>Precio unitario</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        @foreach (var productProvider in product.ProductProviders)
                                        {
                                            <tr>
                                                <td>@productProvider.Provider?.Name</td>
                                                <td>@productProvider.Quantity</td>
                                                <td>@productProvider.OutstandingQuantity</td>
                                                <td>@productProvider.PayedQuantity</td>
                                                <td>@productProvider.UnitPrice</td>
                                            </tr>
                                        }
                                    </tbody>
                                </table>
                            }
                            else
                            {
                                
                            }
                        </div>
                    </div>
                </div>
                <div class="accordion-item m-4">
                    <h2 class="accordion-header">
                        <button class="accordion-button" type="button" @onclick="() => isLocationsCollapsed = !isLocationsCollapsed">
                            Sección 2
                        </button>
                    </h2>
                    <div class="@($"accordion-collapse {(isLocationsCollapsed ? "collapse" : "collapse show")}")">
                        <div class="accordion-body">
                            Contenido de la sección 2
                        </div>
                    </div>
                </div>
            </div>*@
        }
    </Authorized>
</AuthorizeView>
